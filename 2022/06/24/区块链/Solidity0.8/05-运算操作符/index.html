<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://kongpengyq.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="算术运算符 +，-，*，&#x2F;，%(取余,取模)， ++(递增),--(递减),+&#x3D;(加法赋值),-&#x3D;(减法赋值) **（次方）  1.1 unchecked默认情况下，算术运算都会进行溢出检查，但是也可以禁用检查，可以通过 unchecked block 来禁用检查，此时会返回截断的结果。 1234function f(uint a, uint b) pure public returns (uin">
<meta property="og:type" content="article">
<meta property="og:title" content="05-运算操作符">
<meta property="og:url" content="https://kongpengyq.com/2022/06/24/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/05-%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C%E7%AC%A6/index.html">
<meta property="og:site_name" content="YQ &amp; 博客">
<meta property="og:description" content="算术运算符 +，-，*，&#x2F;，%(取余,取模)， ++(递增),--(递减),+&#x3D;(加法赋值),-&#x3D;(减法赋值) **（次方）  1.1 unchecked默认情况下，算术运算都会进行溢出检查，但是也可以禁用检查，可以通过 unchecked block 来禁用检查，此时会返回截断的结果。 1234function f(uint a, uint b) pure public returns (uin">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-06-23T16:00:00.000Z">
<meta property="article:modified_time" content="2023-10-27T08:03:09.677Z">
<meta property="article:author" content="幺柒YQ">
<meta property="article:tag" content="区块链">
<meta property="article:tag" content="Solidity0.8.17">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://kongpengyq.com/2022/06/24/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/05-%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C%E7%AC%A6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>05-运算操作符 | YQ & 博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="YQ & 博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YQ & 博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://kongpengyq.com/2022/06/24/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/05-%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C%E7%AC%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avater.png">
      <meta itemprop="name" content="幺柒YQ">
      <meta itemprop="description" content="努力坚持就会有希望">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YQ & 博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          05-运算操作符
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-24 00:00:00" itemprop="dateCreated datePublished" datetime="2022-06-24T00:00:00+08:00">2022-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-27 16:03:09" itemprop="dateModified" datetime="2023-10-27T16:03:09+08:00">2023-10-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Solidity0-8-17/" itemprop="url" rel="index">
                    <span itemprop="name">Solidity0.8.17</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h1><ul>
<li><code>+</code>，<code>-</code>，<code>*</code>，<code>/</code>，<code>%</code>(取余,取模)，</li>
<li><code>++</code>(递增),<code>--</code>(递减),<code>+=</code>(加法赋值),<code>-=</code>(减法赋值)</li>
<li><code>**</code>（次方）</li>
</ul>
<h2 id="1-1-unchecked"><a href="#1-1-unchecked" class="headerlink" title="1.1 unchecked"></a>1.1 unchecked</h2><p>默认情况下，算术运算都会进行溢出检查，但是也可以禁用检查，可以通过 <code>unchecked block</code> 来禁用检查，此时会返回截断的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function f(uint a, uint b) pure public returns (uint) &#123;</span><br><span class="line">    // 减法溢出会返回“截断”的结果</span><br><span class="line">    unchecked &#123; return a - b; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>溢出的检查功能是在 <code>0.8.0</code> 版本加入的，在此版本之前，请使用 <strong>OpenZepplin SafeMath</strong> 库。</p>
<h2 id="1-2-一元运算负"><a href="#1-2-一元运算负" class="headerlink" title="1.2 一元运算负 -"></a>1.2 一元运算负 <code>-</code></h2><p>表达式 <code>-x</code> 相当于 <code>(T(0) - x)</code> 这里 <code>T</code> 是指 <code>x</code> 的类型。 <code>-x</code> 只能应用在有符号型的整数上。 如果 <code>x</code> 为负数， <code>-x</code> 为正数。</p>
<p>由于使用两进制补码表示数据，你还需要小心:如果有 <code>int x = type(int).min;</code>， 那 <code>-x</code> 将不在正数取值的范围内。 这意味着这个检测 </p>
<p><code>unchecked &#123; assert(-x == x); &#125;</code> 是可以通过的（即这种情况下，不能假设它的负数会是正数），如果是 checked 模式，则会触发异常。</p>
<h2 id="1-3-除法运算"><a href="#1-3-除法运算" class="headerlink" title="1.3 除法运算"></a>1.3 除法运算</h2><p>除法运算结果的类型始终是其中一个操作数的类型，整数除法总是产生整数。在 Solidity 中，分数会取零。 这意味着 <code>int256(-5) / int256(2) == int256(-2)</code> 。</p>
<h2 id="1-4-模运算（取余）"><a href="#1-4-模运算（取余）" class="headerlink" title="1.4 模运算（取余）"></a>1.4 模运算（取余）</h2><p>模运算 <code>a％n</code> 是在操作数 <code>a</code> 的除以 <code>n</code> 之后产生余数 <code>r</code> ，其中 <code>q = int(a / n)</code> 和 <code>r = a - (n * q)</code> 。 这意味着模运算结果与左操作数相同的符号相同（或零）。 对于 负数的 a : <code>a % n == -(-a % n)</code>， 几个例子：</p>
<ul>
<li><code>int256(5) % int256(2) == int256(1)</code></li>
<li><code>int256(5) % int256(-2) == int256(1)</code></li>
<li><code>int256(-5) % int256(2) == int256(-1)</code></li>
<li><code>int256(-5) % int256(-2) == int256(-1)</code></li>
</ul>
<p>对 0 取模会发生错误 <code>Panic</code> 错误，该检查不能通过<code>unchecked &#123; … &#125;</code> 。</p>
<h2 id="1-5-幂运算"><a href="#1-5-幂运算" class="headerlink" title="1.5 幂运算"></a>1.5 幂运算</h2><p>幂运算仅适用于无符号类型。 结果的类型总是等于基数的类型. 请注意类型足够大以能够容纳幂运算的结果，要么发生潜在的 assert 异常或者使用截断模式。</p>
<p>在 <code>checked</code> 模式下，幂运算仅会为小基数使用相对便宜的 <code>exp</code> 操作码。 例如 <code>x**3</code> 的例子，表达式 <code>x*x*x</code> 也许更便宜。 在任何情况下，都建议进行 <code>gas</code> 消耗测试和使用优化器。</p>
<p>注意 <code>0**0</code> 在 EVM 中定义为 1 。</p>
<h2 id="1-6-i-和-i-区别"><a href="#1-6-i-和-i-区别" class="headerlink" title="1.6 i++ 和 ++i 区别"></a>1.6 i++ 和 ++i 区别</h2><ul>
<li><code>a = i++</code>: 先把 i 的值赋予 a，然后在执行 i&#x3D;i+1；</li>
<li><code>a = ++i</code>: 先执行 i&#x3D;i+1，然后在把 i 的值赋予 a；</li>
</ul>
<h2 id="1-7-for-循环中，-i-更省钱"><a href="#1-7-for-循环中，-i-更省钱" class="headerlink" title="1.7 for 循环中，++i 更省钱"></a>1.7 for 循环中，++i 更省钱</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.17;</span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">    // 25153 gas</span><br><span class="line">    function test1() public pure returns (uint256 temp) &#123;</span><br><span class="line">        for (uint256 index = 0; index &lt; 10; index++) &#123;</span><br><span class="line">            temp += index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 25081 gas</span><br><span class="line">    function test2() public pure returns (uint256 temp) &#123;</span><br><span class="line">        for (uint256 index = 0; index &lt; 10; ++index) &#123;</span><br><span class="line">            temp += index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-8-赋值运算符"><a href="#1-8-赋值运算符" class="headerlink" title="1.8 赋值运算符"></a>1.8 赋值运算符</h2><ul>
<li><code>= </code>(简单赋值)</li>
<li><code>+=</code> (相加赋值)</li>
<li><code>−=</code> (相减赋值)</li>
<li><code>*=</code> (相乘赋值)</li>
<li><code>/=</code> (相除赋值)</li>
<li><code>%=</code> (取模赋值)</li>
</ul>
<p>注意： 同样的逻辑也适用于位运算符，因此它们将变成 <code>&lt;&lt;=</code>、<code>&gt;&gt;=</code>、<code>&gt;&gt;=</code>、<code>&amp;=</code>、<code>|=</code>和<code>^=</code>。</p>
<p><code>a += e</code> 等同于 <code>a = a + e</code>。其它运算符如 <code>-=</code>， <code>*=</code>， <code>/=</code>， <code>%=</code>， <code>|=</code>， <code>&amp;=</code> ， <code>^=</code> ， <code>&lt;&lt;=</code> 和 <code>&gt;&gt;=</code> 都是如此定义的。</p>
<ul>
<li><code>a++</code> 和 <code>a--</code> 分别等同于 <code>a += 1</code> 和 <code>a -= 1</code>，但表达式本身的值等于 <code>a</code> 在计算之前的值。</li>
<li>与之相反， <code>--a</code> 和 <code>++a</code> 虽然最终 <code>a</code> 的结果与之前的表达式相同，但表达式的返回值是计算之后的值。</li>
</ul>
<h1 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h1><p>关系运算符一共有六种：分别为： 大于 、小于 、 大于等于 、 小于等于 、 等于 和 不等于 。</p>
<ul>
<li><code>&gt;</code> (大于)</li>
<li><code>&lt;</code> (小于)</li>
<li><code>&gt;=</code> (大于等于)</li>
<li><code>&lt;=</code> (小于等于)</li>
<li><code>==</code> (等于)</li>
<li><code>!=</code> (不等于)</li>
</ul>
<p><strong>返回的结果是一个布尔值；</strong></p>
<h2 id="2-1-布尔类型-支持的运算符"><a href="#2-1-布尔类型-支持的运算符" class="headerlink" title="2.1 布尔类型 支持的运算符"></a>2.1 布尔类型 支持的运算符</h2><ul>
<li><p>包括：<code>!</code>逻辑非</p>
</li>
<li><p><code>==</code>等于，<code>!=</code> 不等于</p>
</li>
<li><p>&amp;&amp;逻辑与，||逻辑或</p>
<ul>
<li><code>&amp;&amp;</code>，<code>||</code> 为短路运算符</li>
</ul>
</li>
</ul>
<h2 id="2-2-定长字节数组支持的运算符"><a href="#2-2-定长字节数组支持的运算符" class="headerlink" title="2.2 定长字节数组支持的运算符"></a>2.2 定长字节数组支持的运算符</h2><ul>
<li>比较运算符： <code>&lt;=</code>， <code>&lt;</code>， <code>==</code>， <code>!=</code>， <code>&gt;=</code>， <code>&gt;</code> （返回布尔型）</li>
<li>位运算符： <code>&amp;</code>， <code>|</code>， <code>^</code> （按位异或）， <code>~</code> （按位取反）</li>
<li>移位运算符： <code>&lt;&lt;</code> （左移位）， <code>&gt;&gt;</code> （右移位）</li>
<li>索引访问：如果 <code>x</code> 是 <code>bytesI</code> 类型，那么 <code>x[k]</code> （其中 0 &lt;&#x3D; k &lt; I）返回第 k 个字节（只读）。</li>
</ul>
<p>该类型可以和作为右操作数的无符号整数类型进行移位运算（但返回结果的类型和左操作数类型相同），右操作数表示需要移动的位数。 进行有符号整数位移运算会引发运行时异常。</p>
<h1 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h1><h2 id="3-1-基础用法"><a href="#3-1-基础用法" class="headerlink" title="3.1 基础用法"></a>3.1 基础用法</h2><ul>
<li>&amp;&amp; (逻辑与)<ul>
<li>如果两个操作数都是 true ，则条件为真。</li>
</ul>
</li>
<li>|| (逻辑或)<ul>
<li>如果两个操作数有一个为 true ，则条件为真。</li>
</ul>
</li>
<li>! (逻辑非)<ul>
<li>反转操作数的逻辑状态。如果条件为真，则逻辑非操作将使其为假。</li>
</ul>
</li>
</ul>
<h2 id="3-2-和-的短路用法"><a href="#3-2-和-的短路用法" class="headerlink" title="3.2 &amp;&amp; 和 || 的短路用法"></a>3.2 <code>&amp;&amp;</code> 和 <code>||</code> 的短路用法</h2><p>原理:</p>
<ul>
<li><code>A &amp;&amp; B</code>,如果 A 为 false，B 就不执行了</li>
<li><code>A || B</code>,如果 A 为 true，B 就不执行了</li>
</ul>
<p>合理的使用短路操作，可以省一些 gas 费。</p>
<h1 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h1><p>三元运算符是一个表达是形式： <code>&lt;expression&gt; ? &lt;trueExpression&gt; : &lt;falseExpression&gt;</code> 。 它根据 <code>&lt;expression&gt;</code> 的执行结果，选择后两个给定表达式中的一个。 如果 <code>&lt;expression&gt;</code> 执行结果 true ，那么 <code>&lt;trueExpression&gt;</code> 将被执行，否则 <code>&lt;falseExpression&gt;</code> 被执行。</p>
<p>代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.17;</span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">    uint256 public a = 20;</span><br><span class="line">    uint256 public b = 10;</span><br><span class="line"></span><br><span class="line">    function test1() public view returns (bool) &#123;</span><br><span class="line">        uint256 temp = a + b;</span><br><span class="line">        return temp &gt; 25 ? true : false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test2() public view returns (bool) &#123;</span><br><span class="line">        uint256 temp = a + b;</span><br><span class="line">        return temp &lt; 25 ? true : false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三元运算符的结果类型是由两个操作数的类型决定的，方法与上面一样，如果需要的话，首先转换为它们的最小可容纳类型（mobile type ）。</p>
<p>因此， <code>255 + (true ? 1 : 0)</code> 将由于算术溢出而被回退。 原因是 <code>(true ? 1 : 0)</code> 是 uint8 类型，这迫使加法也要在 <code>uint8</code> 中执行。 而 <code>256</code> 超出了这个类型所允许的范围。</p>
<p>另一个结果是，像 <code>1.5 + 1.5</code> 这样的表达式是有效的，但 <code>1.5 + (true ? 1.5 : 2.5)</code> 则无效。 这是因为前者是以无限精度来进行有理表达式运算，只有它的最终结果值才是重要的。 后者涉及到将小数有理数转换为整数，这在目前是不允许的。</p>
<h1 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h1><p>位运算在数字的二进制补码表示上执行。 这意味着： <code>~int256(0)== int256(-1)</code>。</p>
<p>假设 A 等于 2；B 等于 3。</p>
<ul>
<li><p>&amp;(位与): 对其整数参数的每个位执行位与操作。</p>
<ul>
<li>例: (A &amp; B) 为 2.</li>
</ul>
</li>
<li><p>|(位或): 对其整数参数的每个位执行位或操作。</p>
<ul>
<li>例: (A | B) 为 3.</li>
</ul>
</li>
<li><p>^(位异或): 对其整数参数的每个位执行位异或操作。</p>
<ul>
<li>例: (A ^ B) 为 1.</li>
</ul>
</li>
<li><p>~(位非): 一元操作符，反转操作数中的所有位。</p>
<ul>
<li>例: (~B) 为 -4.</li>
</ul>
</li>
<li><p>&lt;&lt;(左移位)): 将第一个操作数中的所有位向左移动，移动的位置数由第二个操作数指定，新的位由 0 填充。将一个值向左移动一个位置相当于乘以 2，移动两个位置相当于乘以 4，以此类推。</p>
<ul>
<li>例: (A « 1) 为 4.</li>
</ul>
</li>
<li><p><code>&gt;&gt;</code>(右移位): 左操作数的值向右移动，移动位置数量由右操作数指定</p>
<ul>
<li>例: (A » 1) 为 1.</li>
</ul>
</li>
</ul>
<p>如果两个中的任一个数是小数，则不允许进行位运算。如果指数是小数的话，也不支持幂运算（因为这样可能会得到一个无理数）。</p>
<h1 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h1><p><code>delete a</code> 的结果是将 <code>a</code> 类型初始值赋值给<code>a</code>。换句话说，在 <code>delete a</code> 之后 <code>a</code> 的值与在没有赋值的情况下声明 <code>a</code> 的情况相同。</p>
<p><code>delete</code> 适用于整型，数组，结构体映射。</p>
<ul>
<li>对于整型变量：相当于 <code>a = 0</code>。</li>
<li>对于动态数组：是将重置为数组长度为 0 的数组</li>
<li>对于静态数组：是将数组中的所有元素重置为初始值。</li>
<li>对于数组而言：<code>delete a[x]</code> 仅删除数组索引 <code>x</code> 处的元素，其他的元素和长度不变，这为数组留出了一个空位。如果打算删除项，映射可能是更好的选择。</li>
<li>对于结构体：则将结构体中的所有属性(成员)重置。</li>
<li>mapping : 是将所选择的 key 重置为初始值。</li>
</ul>
<p>需要注意以下几点：</p>
<p><code>delete</code> 对整个映射是无效的（因为映射的键可以是任意的，通常也是未知的）。因此在你删除一个结构体时，结果将重置所有的非映射属性（成员），这个过程是递归进行的，除非它们是映射。然而，单个的键及其映射的值是可以被删除的。</p>
<p>理解 <code>delete a</code> 的效果就像是给 <code>a</code> 赋值很重要，换句话说，这相当于在 <code>a</code>中存储了一个新的对象。</p>
<p>当 <code>a</code> 是应用变量时，我们可以看到这个区别， <code>delete a</code> 它只会重置 <code>a</code> 本身，而不是更改它之前引用的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.17;</span><br><span class="line"></span><br><span class="line">contract DeleteLBC &#123;</span><br><span class="line">    uint256 data;</span><br><span class="line">    uint256[] dataArray;</span><br><span class="line"></span><br><span class="line">    function f() public &#123;</span><br><span class="line">        uint256 x = data;</span><br><span class="line">        delete x; // 将 x 设为 0，并不影响数据</span><br><span class="line">        delete data; // 将 data 设为 0，并不影响 x，因为它仍然有个副本</span><br><span class="line">        uint256[] storage y = dataArray;</span><br><span class="line">        delete dataArray;</span><br><span class="line">        // 将 dataArray.length 设为 0，但由于 uint[] 是一个复杂的对象，y 也将受到影响，</span><br><span class="line">        // 因为它是一个存储位置是 storage 的对象的别名。</span><br><span class="line">        // 另一方面：&quot;delete y&quot; 是非法的，引用了 storage 对象的局部变量只能由已有的 storage 对象赋值。</span><br><span class="line">        assert(y.length == 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li></li>
</ul>
</li>
</ul>

    </div>

    
    
    
    
    
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">-------------本文结束感谢您的阅读-------------</div>
    
</div>
      </div>
    
        <div class="reward-container">
  <div>原创技术分享，您的支持将鼓励我继续创作.</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    点击打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="幺柒YQ 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="幺柒YQ 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>幺柒YQ
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://kongpengyq.com/2022/06/24/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/05-%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C%E7%AC%A6/" title="05-运算操作符">https://kongpengyq.com/2022/06/24/区块链/Solidity0.8/05-运算操作符/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

            <div class="social-item">
              <a target="_blank" class="social-link" href="https://twitter.com/qiyao666">
                <span class="icon">
                  <i class="fa fa-twitter"></i>
                </span>

                <span class="label">Twitter</span>
              </a>
            </div>

            <div class="social-item">
              <a target="_blank" class="social-link" href="/images/wechat.jpg">
                <span class="icon">
                  <i class="fa fa-wechat"></i>
                </span>

                <span class="label">Wechat</span>
              </a>
            </div>

            <div class="social-item">
              <a target="_blank" class="social-link" href="/atom.xml">
                <span class="icon">
                  <i class="fa fa-rss"></i>
                </span>

                <span class="label">RSS</span>
              </a>
            </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag"># 区块链</a>
              <a href="/tags/Solidity0-8-17/" rel="tag"># Solidity0.8.17</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/06/21/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/04-%E5%87%BD%E6%95%B0/" rel="prev" title="04-函数">
      <i class="fa fa-chevron-left"></i> 04-函数
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/06/27/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity0.8/06-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" rel="next" title="06-错误处理">
      06-错误处理 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC81OTA3NC8zNTUzNg=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">算术运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-unchecked"><span class="nav-text">1.1 unchecked</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E4%B8%80%E5%85%83%E8%BF%90%E7%AE%97%E8%B4%9F"><span class="nav-text">1.2 一元运算负 -</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97"><span class="nav-text">1.3 除法运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E6%A8%A1%E8%BF%90%E7%AE%97%EF%BC%88%E5%8F%96%E4%BD%99%EF%BC%89"><span class="nav-text">1.4 模运算（取余）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-%E5%B9%82%E8%BF%90%E7%AE%97"><span class="nav-text">1.5 幂运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-i-%E5%92%8C-i-%E5%8C%BA%E5%88%AB"><span class="nav-text">1.6 i++ 和 ++i 区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-for-%E5%BE%AA%E7%8E%AF%E4%B8%AD%EF%BC%8C-i-%E6%9B%B4%E7%9C%81%E9%92%B1"><span class="nav-text">1.7 for 循环中，++i 更省钱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-8-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">1.8 赋值运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">关系运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B-%E6%94%AF%E6%8C%81%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">2.1 布尔类型 支持的运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E5%AE%9A%E9%95%BF%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84%E6%94%AF%E6%8C%81%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">2.2 定长字节数组支持的运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">逻辑运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="nav-text">3.1 基础用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%92%8C-%E7%9A%84%E7%9F%AD%E8%B7%AF%E7%94%A8%E6%B3%95"><span class="nav-text">3.2 &amp;&amp; 和 || 的短路用法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">三元运算符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">位运算符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#delete"><span class="nav-text">delete</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="幺柒YQ"
      src="/images/avater.png">
  <p class="site-author-name" itemprop="name">幺柒YQ</p>
  <div class="site-description" itemprop="description">努力坚持就会有希望</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">232</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/kpyaoqi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kpyaoqi" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:18312386077@163.com" title="E-Mail → mailto:18312386077@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat.jpg" title="WeChat → images&#x2F;wechat.jpg"><i class="fa fa-fw fa-wechat"></i>WeChat</a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/qq.jpg" title="QQ → images&#x2F;qq.jpg"><i class="fa fa-fw fa-qq"></i>QQ</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://baidu.com/" title="https:&#x2F;&#x2F;baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://stackoverflow.com/" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;" rel="noopener" target="_blank">Stackoverflow</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2021-11 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">幺柒YQ</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">899k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">13:37</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共379.4k字</span>
</div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
